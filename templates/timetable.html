<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Class Timetable</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body>
  <main class="container">
    <h1>My Class Timetable</h1>
    
    <div class="actions">
      <a href="{{ url_for('add_class') }}" class="button">Add New Class</a>
      <a href="{{ url_for('index') }}" class="button secondary">View as List</a>
    </div>
    
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="flash-messages">
          {% for category, message in messages %}
            <div class="flash {{ category }}">{{ message }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
    
    <div class="timetable">
      <table>
        <thead>
          <tr>
            <th>Time</th>
            <th>Monday</th>
            <th>Tuesday</th>
            <th>Wednesday</th>
            <th>Thursday</th>
            <th>Friday</th>
            <th>Saturday</th>
            <th>Sunday</th>
          </tr>
        </thead>
        <tbody>
          {% for time_slot in time_slots %}
          <tr>
            <td class="time-header">{{ time_slot }}</td>
            {% for day in ['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday'] %}
            <td>
              {% for class in classes %}
                {% if class.day == day and class.time == time_slot %}
                <div class="class-event">
                  <div class="class-name">{{ class.name }}</div>
                  <div class="class-location">{{ class.location }}</div>
                  {% if class.notes %}
                  <div class="class-notes">{{ class.notes }}</div>
                  {% endif %}
                  <div class="class-actions">
                    <a href="{{ url_for('edit_class', class_id=class.id) }}">Edit</a>
                    <form method="POST" action="{{ url_for('delete_class', class_id=class.id) }}" 
                          onsubmit="return confirm('Are you sure you want to delete this class?');">
                      <button type="submit" class="link-button">Delete</button>
                    </form>
                  </div>
                </div>
                {% endif %}
              {% endfor %}
            </td>
            {% endfor %}
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    
    {% if not classes %}
    <p>No classes scheduled. <a href="{{ url_for('add_class') }}">Add your first class</a>.</p>
    {% endif %}
  </main>
</body>
</html>
