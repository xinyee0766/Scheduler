{% extends "base.html" %}

{% block title %}Timetable - ByeByeLastMinute{% endblock %}

{% block content %}
<h1>My Class Timetable</h1>

<div class="actions">
  <a href="{{ url_for('add_class') }}" class="button">Add Class</a>
  <a href="{{ url_for('index') }}" class="button secondary">List View</a>
</div>

<div class="timetable">
  <table border="1" cellpadding="8" cellspacing="0">
    <thead>
      <tr>
        <th>Time</th>
        {% for day in ['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday'] %}
          <th>{{ day }}</th>
        {% endfor %}
      </tr>
    </thead>
    <tbody>
      {% for slot in time_slots %}
      <tr>
        <td class="time-header">{{ slot }}</td>
        {% for day in ['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday'] %}
        <td>
          {% for c in class_map[day][slot] %}
          <div class="class-event {{ c['day']|lower }}">
            <div class="class-name">{{ c['name'] }}</div>
            <div class="class-location">{{ c['location'] }}</div>
            <div class="class-time">{{ c['start_time'] }} - {{ c['end_time'] }}</div>
            {% if c['notes'] %}
              <div class="class-notes">{{ c['notes'] }}</div>
            {% endif %}
            <div class="class-actions">
              <a href="{{ url_for('edit_class', class_id=c['id']) }}" class="link-button">Edit</a>
              <form method="POST" action="{{ url_for('delete_class', class_id=c['id']) }}" style="display:inline;">
                <button type="submit" class="link-button" onclick="return confirm('Are you sure?')">Delete</button>
              </form>
            </div>
          </div>
          {% endfor %}
        </td>
        {% endfor %}
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
